# Enable platform-specific config (linux, macos, windows sections)
common --enable_platform_specific_config

# Sandbox mount pairs required by hermetic_cc_toolchain (Zig cache)
build:linux --sandbox_add_mount_pair=/tmp
build:macos --sandbox_add_mount_pair=/var/tmp
build:windows --sandbox_add_mount_pair=C:\Temp

# Build defaults
build --incompatible_strict_action_env
build --action_env=PATH
build --host_action_env=PATH
build --verbose_failures

# Prefer static linking (avoids shared library path issues in sandbox)
build --dynamic_mode=off

# Test defaults
test --test_output=errors
# NixOS: inherit PATH so test runner scripts can find bash
test --test_env=PATH

# Coverage
coverage --combined_report=lcov
coverage --experimental_use_llvm_covmap
coverage --experimental_generate_llvm_lcov
